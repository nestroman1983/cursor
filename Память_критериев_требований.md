# Память: Критерии требований - ключевые уточнения

## Основные принципы
- **Приоритет регламента**: При расхождении между "Критерии требований.md" и "reglament1_7.md" приоритет имеет регламент
- **Исключения**: Решение об исключениях может принимать только автор регламента
- **Обновления**: Критерии не обновляются, регламент обновляется каждые ~120 дней

## Ключевые уточнения правил
- **R3**: Уровень требования определяется заголовком раздела
- **R7**: Исключений из запрета неточных терминов нет
- **R14**: Любое предложение должно заканчиваться точкой. Заголовки - исключение (точка в конце заголовка не обязательна). При создании ТЗ не ставить точку в конце заголовка.
- **R15**: Логические операторы могут выделяться любыми способами или не выделяться
- **R26**: Недопустимы конкретные слова из примера + их синонимы и вариации

## API и маппинг параметров
- **R43**: Обязательность параметров соответствует терминам документа
- **R44**: Типы данных параметров соответствуют терминам документа
- **R45**: Маппинг параметров проверяется по описанию (идентичному по сути) и типу (точное совпадение)
- **R46**: Обязательность в маппинге: если параметр обязателен в одной системе, то обязателен и в связанных

### Определение таблиц маппинга:
- Любые таблицы, сопоставляющие параметры запросов/ответов или значения параметров двух или более API
- Таблицы с столбцом источника/правила заполнения значения параметров
- Таблицы формата "параметр системы 1" - "параметр системы 2" - "параметр системы N" (количество систем не ограничено)
- При анализе проверять соответствие параметров И возможных значений
- Учитывать ссылки на другие таблицы с вложенными параметрами и вложенные таблицы (анализ с учетом взаимосвязей)

## Уточнения по регламенту
- **4.2**: Версия в наименовании должна соответствовать версии в истории изменений
- **4.3**: При написании ТЗ поле "Функциональность" заполнять "TBD". При проверке ТЗ проверять, что поле не пустое или не заполнено значением "НЕТ" без учета регистра.
- **5.1 Sequence-диаграммы**:
  * При написании ТЗ: создавать в нотации PlantUML (кроме явных исключений)
  * При проверке ТЗ других пользователей:
    - Если есть графическая диаграмма → должно быть текстовое описание
    - Если есть текстовое описание основного сценария → должна быть графическая диаграмма
    - Для альтернативных сценариев: допустимо только текстовое описание без графики
  
  **МЕТОДОЛОГИЯ ПРОВЕРКИ (обязательно!):**
  1. Найти ВСЕ разделы со сценариями (grep "^## Основной сценарий")
  2. Для КАЖДОГО основного сценария:
     - Проверить наличие изображения или скрипта PlantUML ПЕРЕД текстом
     - Проверить наличие заголовка "Основной сценарий:" ПЕРЕД изображением
     - Проверить наличие пронумерованных шагов после изображения
  3. Для КАЖДОГО альтернативного сценария:
     - Проверить наличие текстового описания в виде нумерованных шагов или таблицы
     - Графика НЕ обязательна
  4. Записать результаты в таблицу ПЕРЕД выводом
  5. НЕ делать предположений без фактической проверки содержимого
- **6c**: Игнорировать проверку
- **14**: Игнорировать проверку, оставлять пустым

## Формат отчета о проверке ТЗ

### Обязательный раздел "Сводная таблица качества"
В конце каждой проверки ТЗ на соответствие критериям обязательно добавлять раздел с количественным анализом качества.

**Структура раздела:**

1. **Основная таблица качества** со столбцами:
   - № | Правило | Описание | Кол-во проверок | Соответствия | Несоответствия | Качество, %
   
2. **Методика расчета:**
   - **Количество проверок** = общее количество объектов (предложений, параметров, сценариев и т.п.), проверенных на соответствие правилу
   - **Количество соответствий** = количество успешно пройденных проверок
   - **Количество несоответствий** = количество найденных отклонений от правила
   - **Процент качества** = (Соответствия / Проверки) × 100%, округление до 1 знака после запятой

3. **Детализация проверок:**
   Для каждого правила указать:
   - Объект проверки (что именно проверялось)
   - Проверено (количество и список объектов)
   - Результаты (конкретные находки)
   - Итого (проверки, соответствия, несоответствия)

4. **Проверка корректности:**
   Проверить для каждого правила: Соответствия + Несоответствия = Количество проверок

5. **Итоговый показатель качества:**
   - Расчет среднего арифметического всех процентов качества
   - Итоговая оценка в формате: "X.X% - [категория]"
   - Рекомендации по приоритетам исправления

**Важно:** 
- Считать ВСЕ проверенные объекты, а не только найденные ошибки
- Для R2: считать все проверенные предложения, а не только с пассивным залогом
- Для R7: считать все проверенные определения/формулировки, а не только неточные термины
- Для R26: считать все проверенные фразы, а не только найденные абсолюты
- Для R43/R44: считать все параметры в таблицах API
- Для R45/R46: считать все пары параметров в маппинге

## Для использования в других чатах
Ссылаться на обновленные документы и применять эти правила при работе с техническими заданиями.
