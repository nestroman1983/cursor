# Методология проверки технических заданий

## Цель документа
Предотвращение ошибок при проверке ТЗ на соответствие критериям требований путем систематического подхода к анализу.

---

## Общие принципы

### 1. **Полная верификация - Не делать предположений**
❌ **НЕПРАВИЛЬНО:** "Вероятно, в сценарии 5.3 текст отсутствует"  
✅ **ПРАВИЛЬНО:** Прочитать раздел 5.3 и убедиться фактически

**Правило:** Каждое утверждение в отчете должно быть подтверждено фактическими данными из документа.

### 2. **Систематический подход - Чек-лист для каждого правила**
❌ **НЕПРАВИЛЬНО:** Интуитивная проверка "на глаз"  
✅ **ПРАВИЛЬНО:** Использовать пошаговую инструкцию для каждого правила

**Правило:** Для каждого проверяемого правила должна быть четкая последовательность шагов.

### 3. **Промежуточная фиксация результатов**
❌ **НЕПРАВИЛЬНО:** Держать результаты "в голове" и сразу писать итог  
✅ **ПРАВИЛЬНО:** Создавать промежуточные таблицы с результатами по каждому объекту

**Правило:** Перед формированием итогового вывода записать результаты проверки каждого объекта.

### 4. **Проверка всех объектов, а не выборочная**
❌ **НЕПРАВИЛЬНО:** Проверить 2 из 6 сценариев и сделать вывод обо всех  
✅ **ПРАВИЛЬНО:** Проверить ВСЕ 6 сценариев

**Правило:** Количество проверенных объектов = количеству объектов в документе.

---

## Методология проверки конкретных правил

### Регламент 5.1 - Sequence-диаграммы

**Пошаговая инструкция:**

**Шаг 1: Идентификация всех объектов проверки**
```bash
# Найти все основные сценарии
grep "^## Основной сценарий" ТЗ.md

# Найти все альтернативные сценарии  
grep "^### Альтернативны" ТЗ.md
```

**Шаг 2: Создать промежуточную таблицу**
| Сценарий | Номер раздела | Графика (строка) | Текст (строка) | Статус |
|----------|---------------|------------------|----------------|--------|
| 5.1      | ?             | ?                | ?              | ?      |
| 5.2      | ?             | ?                | ?              | ?      |
| ...      | ...           | ...              | ...            | ...    |

**Шаг 3: Заполнить таблицу для КАЖДОГО сценария**
Для каждого основного сценария:
- [ ] Прочитать раздел полностью
- [ ] Найти изображение (PNG/base64, PlantUML код)
- [ ] Найти заголовок "Основной сценарий:" или "Предусловие:"
- [ ] Проверить наличие пронумерованных шагов после заголовка
- [ ] Записать номера строк в таблицу

Для каждого альтернативного сценария:
- [ ] Прочитать раздел
- [ ] Проверить наличие текстового описания
- [ ] Графика не обязательна

**Шаг 4: Анализ заполненной таблицы**
- Подсчитать количество проверок
- Подсчитать соответствия
- Подсчитать несоответствия
- Проверить: Соответствия + Несоответствия = Проверки

**Шаг 5: Формирование вывода**
- Только после заполнения таблицы для ВСЕХ сценариев делать итоговый вывод

---

### R2 - Активный залог

**Пошаговая инструкция:**

**Шаг 1: Определить объем проверки**
- Найти раздел "Требования к разработке"
- Подсчитать общее количество предложений с требованиями

**Шаг 2: Проверить каждое предложение**
- Для каждого предложения определить: активный или пассивный залог
- Записать номер строки, если найден пассивный залог

**Шаг 3: Подсчет**
- Общее количество = все проверенные предложения (не только с ошибками!)
- Несоответствия = количество найденных случаев пассивного залога
- Соответствия = Общее количество - Несоответствия

---

### R7 - Неточные термины

**Пошаговая инструкция:**

**Шаг 1: Определить объем проверки**
- Раздел "Термины и определения" - все определения
- Ключевые формулировки в разделе "Требования"

**Шаг 2: Для каждого определения/формулировки**
- Проверить на наличие неточных терминов из списка:
  * "допустимо", "приблизительно", "при необходимости", "и т.п.", "и т.д.", "обычно", "как правило"
- Записать номер строки, если найден неточный термин

**Шаг 3: Подсчет**
- Общее количество = все проверенные определения/формулировки
- Несоответствия = количество найденных неточных терминов
- Соответствия = Общее количество - Несоответствия

---

### R43/R44 - API параметры

**Пошаговая инструкция:**

**Шаг 1: Найти все таблицы с параметрами API**
```bash
grep -A 10 "Параметры запроса" ТЗ.md
grep -A 10 "Параметры ответа" ТЗ.md
```

**Шаг 2: Для каждой таблицы**
- Подсчитать количество строк (параметров)
- Проверить наличие столбца "Обязательность" (R43)
- Проверить наличие столбца "Тип" (R44)
- Проверить, что типы определены в разделе "Термины"

**Шаг 3: Подсчет**
- Общее количество = сумма всех параметров во всех таблицах
- Несоответствия R43 = параметры без указания обязательности
- Несоответствия R44 = параметры с типами, не определенными в терминах

---

## Контрольный чек-лист перед финализацией отчета

Перед отправкой отчета проверить:

- [ ] Для каждого правила указано **общее количество** проверенных объектов (не только ошибок)
- [ ] Для каждого правила: `Соответствия + Несоответствия = Проверки`
- [ ] Нет утверждений типа "требует проверки" без обоснования
- [ ] Все числа в отчете подтверждены конкретными примерами или подсчетом
- [ ] Для каждого найденного нарушения указан номер строки или конкретный пример
- [ ] Итоговый процент качества пересчитан правильно

---

## Памятка: Типичные ошибки

| Ошибка | Пример | Решение |
|--------|--------|---------|
| Предположения без проверки | "Вероятно, текст отсутствует" | Прочитать раздел и убедиться |
| Подсчет только ошибок | "Найдено 10 случаев → 10 проверок" | Подсчитать ВСЕ объекты |
| Выборочная проверка | "Проверил 2 из 6 → сделал вывод о всех" | Проверить все 6 |
| Интуитивная оценка | "На глаз все правильно" | Использовать чек-лист |
| Отсутствие промежуточных данных | Сразу пишу итог | Сначала таблица, потом итог |

---

---

## Методология проверки правил R1-R46

### Категория 1: ТОЧНОСТЬ (R1-R9)

#### R1 - Структурированные предложения

**Объект проверки:** Все предложения с формулировками требований

**Пошаговая инструкция:**

**Шаг 1:** Найти все разделы с требованиями
```bash
# Разделы "Требования к разработке", "Функциональные требования" и подобные
grep -n "## Требования" ТЗ.md
```

**Шаг 2:** Создать промежуточную таблицу
| № строки | Предложение | Структура | Субъект | Действие | Объект | Статус |
|----------|-------------|-----------|---------|----------|--------|--------|

**Шаг 3:** Для каждого предложения с требованием
- [ ] Определить структуру: [Условие] [Субъект] [Действие] [Объект] [Ограничение]
- [ ] Проверить наличие субъекта (кто/что должно)
- [ ] Проверить наличие действия (что делать)
- [ ] Проверить наличие объекта (над чем)
- [ ] Записать в таблицу

**Критерии соответствия:**
- ✅ Предложение соответствует шаблону [Субъект] [Действие] [Объект]
- ❌ Нарушения: отсутствие структуры, несколько требований в одном предложении

**Подсчет:**
- Проверки = все предложения с требованиями в разделах 4-9
- Несоответствия = количество предложений без четкой структуры
- Соответствия = Проверки - Несоответствия

---

#### R2 - Активный залог

**Объект проверки:** Все формулировки требований

**Пошаговая инструкция:**

**Шаг 1:** Использовать тот же список предложений, что и для R1

**Шаг 2:** Для каждого предложения определить залог
- [ ] Активный залог: "Система должна сформировать..."
- [ ] Пассивный залог: "Отчет должен быть сформирован..."
- [ ] Записать номер строки при обнаружении пассивного залога

**Маркеры пассивного залога:**
- "должен быть", "должна быть", "должно быть"
- "необходимо передавать", "необходимо выполнить"
- "требуется создать", "требуется обеспечить"
- формы глаголов с "-ся": "формируется", "создается"

**Подсчет:**
- Проверки = все предложения с требованиями
- Несоответствия = количество предложений в пассивном залоге
- Соответствия = Проверки - Несоответствия

---

#### R3 - Соответствующие уровню подлежащее и сказуемое

**Объект проверки:** Соответствие субъекта требования уровню раздела

**Пошаговая инструкция:**

**Шаг 1:** Определить уровни разделов
```bash
# Найти все заголовки разделов с требованиями
grep -n "^#" ТЗ.md
```

**Шаг 2:** Создать таблицу уровней
| Раздел | Заголовок | Определенный уровень | Ожидаемый субъект |
|--------|-----------|---------------------|-------------------|
| 6.1 | Требования к системе | Уровень системы | Система |
| 6.2 | Требования к пользователю | Уровень операций | Пользователь |

**Уровни (из регламента):**
1. Уровень бизнес-управления → Субъект: Компания/бизнес-подразделение
2. Уровень бизнес-операций → Субъект: Заинтересованная сторона (Пользователь, Оператор)
3. Уровень системы → Субъект: Система
4. Уровень подсистемы → Субъект: Подсистема/Модуль

**Шаг 3:** Для каждого требования
- [ ] Определить раздел (по заголовку наименьшего уровня)
- [ ] Определить уровень раздела
- [ ] Извлечь субъект из формулировки
- [ ] Проверить соответствие субъекта уровню
- [ ] Записать несоответствия

**Критерии несоответствия:**
- ❌ "Пользователь должен..." в разделе "Требования к системе"
- ❌ "Система должна..." в разделе "Требования к пользователю"

**Подсчет:**
- Проверки = все требования в разделах 4-9
- Несоответствия = требования с неправильным субъектом для уровня
- Соответствия = Проверки - Несоответствия

---

#### R4 - Определенные термины

**Объект проверки:** Термины, используемые в требованиях

**Пошаговая инструкция:**

**Шаг 1:** Найти раздел "Термины и определения"
```bash
grep -n "Термины" ТЗ.md
```

**Шаг 2:** Извлечь все определенные термины
- [ ] Создать список всех терминов из раздела 1
- [ ] Для каждого термина записать: термин, определение, синонимы

**Шаг 3:** Найти все термины в требованиях
- [ ] Прочитать разделы с требованиями (4-9)
- [ ] Для каждого специфичного термина (не общеупотребительного слова):
  * Проверить наличие в разделе "Термины"
  * Если отсутствует → записать как несоответствие

**Специфичные термины (требуют определения):**
- Названия систем, подсистем, модулей
- Бизнес-объекты (Заявка, Договор, Платеж и т.п.)
- Технические термины (API, Callback, Session и т.п.)
- Акронимы и аббревиатуры

**Исключения (не требуют определения):**
- Общеупотребительные слова
- Базовые технические термины (HTTP, JSON, XML - если это общепринято)

**Подсчет:**
- Проверки = количество уникальных специфичных терминов в требованиях
- Несоответствия = термины, не определенные в разделе "Термины"
- Соответствия = Проверки - Несоответствия

---

#### R5 - Определенные артикли

**Объект проверки:** Использование артиклей (только для английского языка)

**Инструкция:**
- Для документов на русском языке: **ПРОПУСТИТЬ ПРОВЕРКУ**
- Для документов на английском языке: проверить использование "the" вместо "a/an"

**Подсчет для русского языка:**
- Проверки = 0 (правило неприменимо)
- Соответствия = 0
- Несоответствия = 0
- Качество = N/A (не применимо)

---

#### R6 - Единицы измерения

**Объект проверки:** Числовые значения в требованиях

**Пошаговая инструкция:**

**Шаг 1:** Найти все числовые значения
```bash
grep -n "[0-9]" ТЗ.md
```

**Шаг 2:** Для каждого числового значения
- [ ] Определить контекст (что измеряется)
- [ ] Проверить наличие единицы измерения
- [ ] Исключения: ID, номера версий, номера пунктов

**Типичные величины, требующие единицы:**
- Время: секунды, минуты, часы, дни
- Объем данных: байты, Кб, Мб, Гб
- Скорость: мбит/сек, запросов/сек
- Расстояние: метры, км
- Количество: штук, записей
- Процент: %

**Исключения:**
- Номера версий: v1.21
- Идентификаторы: ID 12345
- Номера пунктов: п. 6.1
- Коды: HTTP 200

**Подсчет:**
- Проверки = количество числовых значений, требующих единицы измерения
- Несоответствия = числовые значения без единицы измерения
- Соответствия = Проверки - Несоответствия

---

#### R7 - Неточные термины

**Объект проверки:** Определения терминов и формулировки требований

**Пошаговая инструкция:**

**Шаг 1:** Определить объем проверки
- Раздел "Термины и определения" - все определения
- Разделы с требованиями (4-9) - ключевые формулировки

**Шаг 2:** Создать список неточных терминов для поиска

**Неточные наречия:**
- несколько, любой, допустимо, сколько-нибудь, много, большое количество, мало
- почти всегда, очень близко к, приблизительно, около, близко к, почти

**Неточные прилагательные:**
- дополнительный, актуальный, обыденный, общий, типовой, важный
- гибкий, расширяемый, типичный, достаточный, адекватный, пригодный
- эффективный, эффектный, качественный, разумный, общепринятый

**Шаг 3:** Проверить каждое определение/формулировку
```bash
grep -in "допустимо\|приблизительно\|при необходимости" ТЗ.md
```

**Шаг 4:** Для каждого найденного термина
- [ ] Записать номер строки
- [ ] Записать контекст
- [ ] Определить: является ли это нарушением

**Исключения:**
- "Допустимо" в контексте списка допустимых значений может быть приемлемо, если далее идет точный список

**Подсчет:**
- Проверки = количество определений в разделе "Термины" + количество формулировок в требованиях
- Несоответствия = количество использований неточных терминов
- Соответствия = Проверки - Несоответствия

---

#### R8 - Снятие ответственности

**Объект проверки:** Формулировки требований

**Пошаговая инструкция:**

**Шаг 1:** Создать список фраз, снимающих ответственность
- насколько это возможно, как можно меньше, где возможно
- как можно больше, если это необходимо, при необходимости
- по мере необходимости, сообразно обстоятельствам
- как требуется, в рамках целесообразного, если это осуществимо

**Шаг 2:** Поиск в документе
```bash
grep -in "при необходимости\|если необходимо\|где возможно" ТЗ.md
```

**Шаг 3:** Для каждого найденного случая
- [ ] Записать номер строки и контекст
- [ ] Определить: размывает ли фраза ответственность
- [ ] Записать как несоответствие

**Подсчет:**
- Проверки = все формулировки требований в разделах 4-9
- Несоответствия = количество формулировок с фразами снятия ответственности
- Соответствия = Проверки - Несоответствия

---

#### R9 - Открытые формулировки

**Объект проверки:** Формулировки требований

**Пошаговая инструкция:**

**Шаг 1:** Создать список открытых фраз
- "включая, но не ограничиваясь"
- "и так далее", "и т.д.", "и т.п."
- "и тому подобное"

**Шаг 2:** Поиск в документе
```bash
grep -in "и т\.д\.\|и т\.п\.\|и так далее\|не ограничиваясь" ТЗ.md
```

**Шаг 3:** Для каждого найденного случая
- [ ] Записать номер строки
- [ ] Проверить контекст (в требовании или в примере)
- [ ] Если в требовании → записать как несоответствие

**Исключения:**
- "и т.д." в примерах или пояснениях (не в формулировке требования)

**Подсчет:**
- Проверки = все формулировки требований
- Несоответствия = формулировки с открытыми фразами
- Соответствия = Проверки - Несоответствия

---

### Категория 2: КРАТКОСТЬ (R10-R11)

#### R10 - Лишние глаголы в неопределенной форме

**Объект проверки:** Формулировки требований

**Пошаговая инструкция:**

**Шаг 1:** Поиск конструкций с лишними глаголами
```bash
grep -in "обладать способностью\|иметь возможность\|предоставлять возможность" ТЗ.md
```

**Типичные лишние конструкции:**
- "должна обладать способностью хранить" → "должна хранить"
- "должна иметь возможность формировать" → "должна формировать"
- "должна предоставлять возможность создавать" → "должна создавать"

**Шаг 2:** Для каждого найденного случая
- [ ] Записать номер строки
- [ ] Определить лишний глагол
- [ ] Записать как несоответствие

**Подсчет:**
- Проверки = все формулировки требований
- Несоответствия = количество формулировок с лишними глаголами
- Соответствия = Проверки - Несоответствия

---

#### R11 - Отдельные предложения

**Объект проверки:** Количество требований в одном предложении

**Пошаговая инструкция:**

**Шаг 1:** Для каждого предложения с требованием
- [ ] Подсчитать количество отдельных требований (действий)
- [ ] Проверить наличие нескольких сказуемых
- [ ] Проверить наличие союзов "и", "затем", "а также"

**Признаки нескольких требований в одном:**
- Несколько глаголов-действий: "формировать... и выгружать"
- Союз "затем": "создать заявку, затем отправить"
- Перечисление через запятую после одного субъекта

**Шаг 2:** Для каждого предложения с >1 требованием
- [ ] Записать номер строки
- [ ] Указать количество требований
- [ ] Записать как несоответствие

**Исключения:**
- Придаточные предложения для уточнения допустимы
- "Система должна создавать заявку, которая содержит..." - ✅ (одно требование с уточнением)

**Подсчет:**
- Проверки = все предложения с требованиями
- Несоответствия = предложения с >1 требованием
- Соответствия = Проверки - Несоответствия

---

### Категория 3: ОДНОЗНАЧНОСТЬ (R12-R17)

#### R12 - Правила грамматики

**Объект проверки:** Весь текст документа

**Пошаговая инструкция:**

**Шаг 1:** Прочитать документ разделами
- Разделы 1-3: Термины, описание, основания
- Разделы 4-9: Требования
- Разделы 10+: Приложения, ограничения

**Шаг 2:** При чтении отмечать грамматические ошибки
- [ ] Несогласованность подлежащего и сказуемого
- [ ] Неправильные падежи
- [ ] Неправильное время глаголов
- [ ] Неправильные формы слов

**Типичные ошибки:**
- "Система должны формировать" → "Система должна формировать"
- "Отчет об исполнение" → "Отчет об исполнении"

**Шаг 3:** Создать список ошибок
| № строки | Фрагмент | Ошибка | Исправление |

**Подсчет:**
- Проверки = количество предложений в документе
- Несоответствия = количество предложений с грамматическими ошибками
- Соответствия = Проверки - Несоответствия

---

#### R13 - Правила орфографии

**Объект проверки:** Весь текст документа

**Пошаговая инструкция:**

**Шаг 1:** Прочитать документ разделами

**Шаг 2:** При чтении отмечать орфографические ошибки
- [ ] Опечатки в словах
- [ ] Неправильное написание терминов
- [ ] Ошибки в названиях систем

**Исключения:**
- Технические термины на английском
- Специфичные названия систем (если определены в терминах)

**Шаг 3:** Создать список ошибок
| № строки | Слово с ошибкой | Правильное написание |

**Подсчет:**
- Проверки = количество слов в документе (приблизительная оценка)
- Несоответствия = количество слов с орфографическими ошибками
- Соответствия = Проверки - Несоответствия

**Примечание:** Для точного подсчета можно использовать:
- Проверки = количество уникальных слов в разделах 1-9
- Несоответствия = слова с ошибками

---

#### R14 - Правила пунктуации

**Объект проверки:** Все предложения и заголовки

**Пошаговая инструкция:**

**Шаг 1:** Проверить предложения
- [ ] Каждое предложение заканчивается точкой
- [ ] Правильное использование запятых
- [ ] Правильное использование двоеточий и тире
- [ ] Правильное использование кавычек

**Ключевое правило:**
✅ Любое предложение должно заканчиваться точкой

**Шаг 2:** Проверить заголовки
- [ ] Заголовки могут быть как с точкой, так и без (оба варианта допустимы)
- [ ] При создании ТЗ: не ставить точку в конце заголовка

**Шаг 3:** Создать список ошибок
| № строки | Ошибка пунктуации | Исправление |

**Типичные ошибки:**
- Отсутствие точки в конце предложения
- Лишние или недостающие запятые
- Неправильное использование тире вместо дефиса

**Подсчет:**
- Проверки = количество предложений + количество конструкций с запятыми/двоеточиями
- Несоответствия = количество пунктуационных ошибок
- Соответствия = Проверки - Несоответствия

---

#### R15 - Логические операторы

**Объект проверки:** Формулировки с логическими условиями

**Пошаговая инструкция:**

**Шаг 1:** Найти все логические операторы
```bash
grep -in " И \| ИЛИ \| НЕ " ТЗ.md
```

**Шаг 2:** Для каждого логического оператора
- [ ] Проверить единообразие использования
- [ ] Проверить наличие выделения (необязательно)

**Варианты оформления (все допустимы):**
- "[X И Y]" - в квадратных скобках с заглавными буквами
- "(X и Y)" - в круглых скобках со строчными буквами
- "X и Y" - без выделения
- **X и Y** - жирным шрифтом

**Критерий соответствия:**
✅ В рамках одного документа используется единообразное оформление (любое из вариантов)
❌ Смешанное использование разных стилей

**Шаг 3:** Оценить единообразие
- [ ] Если все операторы оформлены одинаково → соответствие
- [ ] Если есть разные стили → несоответствие

**Подсчет:**
- Проверки = количество логических операторов в документе
- Несоответствия = операторы, оформленные не единообразно
- Соответствия = Проверки - Несоответствия

---

#### R16 - Избегать частицы НЕ

**Объект проверки:** Формулировки требований

**Пошаговая инструкция:**

**Шаг 1:** Найти все использования частицы "НЕ"
```bash
grep -in " не " ТЗ.md
```

**Шаг 2:** Для каждого случая
- [ ] Проверить контекст
- [ ] Определить: можно ли переформулировать в позитивную форму
- [ ] Если в формулировке требования → записать как несоответствие

**Пример:**
- ❌ "Система не должна отображать..." 
- ✅ "Система должна скрывать..."

**Исключения:**
- Технические термины: "non-null", "unavailable"
- Логические операторы: "НЕ [X ИЛИ Y]"
- Описание ошибок: "если данные не валидны"

**Подсчет:**
- Проверки = все формулировки требований
- Несоответствия = формулировки с частицей "НЕ" (кроме исключений)
- Соответствия = Проверки - Несоответствия

---

#### R17 - Знак косой черты

**Объект проверки:** Весь текст требований

**Пошаговая инструкция:**

**Шаг 1:** Найти все косые черты
```bash
grep -n "/" ТЗ.md
```

**Шаг 2:** Для каждого случая
- [ ] Проверить контекст
- [ ] Определить: является ли это единицей измерения
- [ ] Если не единица измерения → записать как несоответствие

**Допустимо:**
- Единицы измерения: км/ч, мбит/сек, запросов/сек
- Пути URL: https://example.com/api/v1
- Пути к файлам: /usr/local/bin
- Даты (иногда): 2025/10/20

**Недопустимо:**
- "и/или" → заменить на "И" или "ИЛИ"
- "отдел доставки/исполнения" → "отдел доставки и отдел исполнения"
- "вход/выход" → "вход и выход"

**Подсчет:**
- Проверки = количество косых черт в документе
- Несоответствия = косые черты не в единицах измерения/URL/путях
- Соответствия = Проверки - Несоответствия

---

## История изменений

| Дата | Версия | Автор | Изменение | Причина |
|------|--------|-------|-----------|---------|
| 2025-10-20 | 1.0 | AI Assistant | Создание документа | Анализ ошибки в проверке регламента 5.1 в ТЗ gispay1_21.md |
| 2025-10-20 | 2.0 | AI Assistant | Добавлена методология для R1-R17 | Запрос пользователя на полную методологию всех 46 правил |


